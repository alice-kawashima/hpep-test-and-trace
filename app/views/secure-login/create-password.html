{% extends 'layout.html' %}

{% block pageTitle %}
Create a password | UK Health Security Agency
{% endblock %}

{% block beforeContent %}
<a href="#" class="govuk-back-link" onclick="goBack()">Back</a>
{% endblock %}

{% block content %}
<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">

    <div class="govuk-error-summary" id="error-summary" aria-labelledby="error-summary-title" role="alert" tabindex="-1" hidden>
      <h2 class="govuk-error-summary__title" id="error-summary-title">
        There is a problem
      </h2>
      <div class="govuk-error-summary__body">
        <ul class="govuk-list govuk-error-summary__list">
          <li><a href="#error-1"><span id="error-summary-content-1"></span></a></li>
          <li><a href="#error-2"><span id="error-summary-content-2"></span></a></li>
        </ul>
      </div>
    </div>

    <h1 class="govuk-heading-l">
      Create a password
    </h1>

    <p class="govuk-body">
      Do:
    </p>
    <ul class="govuk-list">
      <li>
        <svg class="govuk-icon govuk-icon__tick" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true" width="34" height="34">
          <path stroke-width="4" stroke-linecap="round" d="M18.4 7.8l-8.5 8.4L5.6 12" stroke="#007f3b"></path>
        </svg>
        use at least 10 characters
      </li>
      <li>
        <svg class="govuk-icon govuk-icon__tick" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true" width="34" height="34">
          <path stroke-width="4" stroke-linecap="round" d="M18.4 7.8l-8.5 8.4L5.6 12" stroke="#007f3b"></path>
        </svg>
        use a password manager, or a random combination of letters, numbers and symbols
      </li>
    </ul>

    <p class="govuk-body">
      Don&#39;t:
    </p>
    <ul class="govuk-list">
      <li>
        <svg class="govuk-icon govuk-icon__tick" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true" width="34" height="34">
          <path stroke-width="4" stroke-linecap="round" d="M18.4 7.8l-8.5 8.4L5.6 12" stroke="#007f3b"></path>
        </svg>
        do not use your name, email address or account ID
      </li>
      <li>
        <svg class="govuk-icon govuk-icon__tick" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true" width="34" height="34">
          <path stroke-width="4" stroke-linecap="round" d="M18.4 7.8l-8.5 8.4L5.6 12" stroke="#007f3b"></path>
        </svg>
        do not use number sequences, like '12345'
      </li>
      <li>
        <svg class="govuk-icon govuk-icon__tick" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true" width="34" height="34">
          <path stroke-width="4" stroke-linecap="round" d="M18.4 7.8l-8.5 8.4L5.6 12" stroke="#007f3b"></path>
        </svg>
        do not use your birthday, or significant dates
      </li>
      <li>
        <svg class="govuk-icon govuk-icon__tick" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true" width="34" height="34">
          <path stroke-width="4" stroke-linecap="round" d="M18.4 7.8l-8.5 8.4L5.6 12" stroke="#007f3b"></path>
        </svg>
        do not use whole words or something that is easy to guess, like ‘password’
      </li>
    </ul>

    <form name="myForm" id="myForm" class="new_individual" id="new_individual" action="/case/start/account-set-up" onsubmit="return validateForm()" accept-charset="UTF-8" method="post" _lpchecked="1" required>

      <input type="hidden" name="authenticity_token" value="LRD0Vu8fHTsT0VJ6YkNgDTtYA3K/sp+LRZ6pCsEw4rqWC2i875RlOsMpZmCXvom+dVDEXtx9k143W7cdVgri8A==">

      <div class="govuk-form-group" id="error-form-group-1">
        <label for="password-field" class="govuk-label">
          Password
        </label>
        <span class="govuk-error-message" id="error-1" style="display: none;">
          <span class="govuk-visually-hidden">Error:</span> <span id="error-message-content-1"></span>
        </span>
        <input id="password-field" class="govuk-input govuk-!-width-one-half" autocomplete="off" type="password" name="create-password">
      </div>

      <div class="govuk-form-group" id="error-form-group-2">
        <label for="confirm-password-field" class="govuk-label">
          Confirm password
        </label>
        <span class="govuk-error-message" id="error-2" style="display: none;">
          <span class="govuk-visually-hidden">Error:</span> <span id="error-message-content-2"></span>
        </span>
        <input id="confirm-password-field" class="govuk-input govuk-!-width-one-half" autocomplete="off" type="password" name="confirm-password">
      </div>

      <div class="govuk-checkboxes">
        <div class="govuk-checkboxes__item">
          <input class="govuk-checkboxes__input" id="example-1" name="example" type="checkbox" value="email">
          <label class="govuk-label govuk-checkboxes__label" for="example-1">
            Show password
          </label>
        </div>
      </div>

      <hr class="govuk-section-break govuk-section-break--m">

      <button class="govuk-button" data-module="govuk-button">
        Save and continue
      </button>

    </form>

  </div>
</div>

<script>
  // Show Password
  $(document).ready(function() {

    $(".show-password, .hide-password").on('click', function() {
      var passwordId = $(this).parents('li:first').find('input').attr('id');
      if ($(this).hasClass('show-password')) {
        $("#" + passwordId).attr("type", "text");
        $(this).parent().find(".show-password").hide();
        $(this).parent().find(".hide-password").show();
      } else {
        $("#" + passwordId).attr("type", "password");
        $(this).parent().find(".hide-password").hide();
        $(this).parent().find(".show-password").show();
      }
    });

  });

  // Errors
  function validateForm() {
    var createPassword = document.forms["myForm"]["create-password"].value;

    if (createPassword == "" || createPassword == null) {

      // Error form group styling
      var formGroup = document.getElementById("error-form-group-1");
      formGroup.classList.add("govuk-form-group--error");

      // Error message
      var errorMessage = document.getElementById("error-1");
      errorMessage.style.display = 'block';

      var errorMessageContent1 = document.getElementById("error-message-content-1");
      errorMessageContent1.innerHTML = 'Enter a password';

      // Error text input styling
      var inputField = document.getElementById("password-field");
      inputField.classList.add("govuk-input--error");

      // Error summary
      var errorSummary = document.getElementById("error-summary");
      errorSummary.style.display = 'block';
      errorSummary.focus();

      var errorSummaryContent1 = document.getElementById("error-summary-content-1");
      errorSummaryContent1.innerHTML = '<a href="#error-1">Enter a password</a>';

      return false;
    }

    var confirmPassword = document.forms["myForm"]["confirm-password"].value;

    if (confirmPassword == "" || confirmPassword == null) {

      // Error form group styling
      var formGroup2 = document.getElementById("error-form-group-2");
      formGroup2.classList.add("govuk-form-group--error");

      // Error message
      var errorMessage2 = document.getElementById("error-2");
      errorMessage2.style.display = 'block';

      var errorMessageContent2 = document.getElementById("error-message-content-2");
      errorMessageContent2.innerHTML = 'Enter a password';

      // Error text input styling
      var inputField2 = document.getElementById("confirm-password-field");
      inputField2.classList.add("govuk-input--error");

      // Error summary
      var errorSummary2 = document.getElementById("error-summary");
      errorSummary2.style.display = 'block';
      errorSummary2.focus();

      var errorSummaryContent2 = document.getElementById("error-summary-content-2");
      errorSummaryContent2.innerHTML = '<a href="#error-2">Enter a password</a>';

      return false;
    }
  }
</script>
{% endblock %}
